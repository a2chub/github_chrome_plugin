# Phase 2: 設定画面とDOM操作基盤

## 概要
ユーザーがカスタマイズできる設定画面を実装し、DOM操作の基盤を構築する。

## 目的
- Options Pageで設定を変更できる
- 設定がStorageに保存される
- Content Scriptが設定を読み込んでDOMを操作できる
- 設定変更が即座に反映される

## タスク

### 2.1 Options Pageの実装
- [ ] `src/options/options.html`の作成
  - 認証設定セクション
    - PAT入力フィールド
    - 保存ボタン
    - トークン状態表示
  - レイアウト設定セクション
    - 各要素のチェックボックス（表示/非表示）
  - 並び順セクション
    - ドラッグ&ドロップ可能なリスト
  - Export/Importセクション
    - Exportボタン
    - Importボタン
    - ファイル選択input
- [ ] `src/options/options.css`の作成
  - レスポンシブデザイン
  - GitHub風のスタイル
  - ドラッグ&ドロップの視覚的フィードバック
- [ ] `src/options/options.ts`の実装
  - 設定の読み込み機能
  - 設定の保存機能
  - PAT入力・保存機能
  - チェックボックスによる表示/非表示設定
  - ドラッグ&ドロップによる並び順設定
  - イベントハンドラーの実装

### 2.2 設定管理機能の実装
- [ ] 設定のデフォルト値定義
  - デフォルトレイアウト設定
  - デフォルト表示設定
- [ ] 設定のバリデーション実装
  - 設定データの型チェック
  - 必須項目のチェック
- [ ] 設定変更の即座反映機能
  - 設定保存時の通知
  - Content Scriptへの設定送信

### 2.3 DOM操作基盤の実装
- [ ] `src/content/dom-manipulator.ts`の実装
  - 既存要素の削除機能
    - セレクタによる要素検索
    - 要素の削除
  - 既存要素の非表示機能
    - CSSによる非表示
  - 新規要素の追加機能
    - 要素の作成
    - DOMへの挿入
- [ ] `src/content/layout-renderer.ts`の実装
  - レイアウトテンプレートの定義
  - レイアウトの適用機能
  - 設定に基づくレイアウト生成

### 2.4 メッセージパッシングの拡張
- [ ] 設定変更通知の実装
  - Background Scriptからの通知受信
  - Content Scriptへの通知送信
- [ ] Content Scriptへの設定送信機能
  - 設定データのシリアライズ
  - メッセージ送信

## 完了基準
- [x] Options Pageで設定を変更できる
- [x] 設定がStorageに保存される
- [x] Content Scriptが設定を読み込んでDOMを操作できる
- [x] 設定変更が即座に反映される

## 見積もり時間
3-4日

## 依存関係
- Phase 1の完了が必要

## 関連ドキュメント
- [要件定義書](../requirements.md)
- [設計書](../design.md)
- [実装計画](../implementation-plan.md)

